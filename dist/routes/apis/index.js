"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var express_1 = __importDefault(require("express"));
var router = express_1.default.Router();
var admin_1 = __importDefault(require("./modules/admin"));
var store_controller_1 = __importDefault(require("../../controllers/apis/store-controller"));
var user_controller_1 = __importDefault(require("../../controllers/apis/user-controller"));
var error_handler_1 = require("../../middlewares/error-handler");
var passport_1 = __importDefault(require("../../config/passport"));
var api_auth_1 = require("../../middlewares/api-auth");
var multer_1 = __importDefault(require("../../middlewares/multer"));
router.post('/signup', user_controller_1.default.signUp);
router.post('/signin', passport_1.default.authenticate('local', { session: false }), user_controller_1.default.signIn);
router.get('/users/:id', api_auth_1.authenticated, user_controller_1.default.getUser);
router.get('/users/:id/edit', api_auth_1.authenticated, user_controller_1.default.editUser);
router.put('/users/:id', api_auth_1.authenticated, multer_1.default.single('avatar'), user_controller_1.default.putUser);
router.put('/avatars/:userId', api_auth_1.authenticated, user_controller_1.default.putAvatar);
router.get('/carts', api_auth_1.authenticated, user_controller_1.default.getCarts);
router.post('/carts/:storeId', api_auth_1.authenticated, user_controller_1.default.addCart);
router.delete('/carts/:cartId', api_auth_1.authenticated, user_controller_1.default.removeCart);
router.get('/orders', api_auth_1.authenticated, user_controller_1.default.getOrders);
router.post('/orders/all', api_auth_1.authenticated, user_controller_1.default.addOrders);
router.get('/stores', api_auth_1.authenticated, store_controller_1.default.getStores);
router.get('/stores/:id', api_auth_1.authenticated, store_controller_1.default.getStore);
router.use('/admin', api_auth_1.authenticated, api_auth_1.authenticatedAdmin, admin_1.default);
router.use('/', error_handler_1.apiErrorHandler);
exports.default = router;
